<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>✦ Notes</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #1a1814;
      --sidebar-bg: #161410;
      --border: #2e2b26;
      --text: #e8e0d4;
      --text-dim: #7a7062;
      --text-faint: #504840;
      --text-muted: #6b6358;
      --accent: #f5c842;
      --danger: #f28b6e;
      --hover: #1f1d19;
      --active-bg: #2a2620;
      --editor-text: #c8bfb0;
    }

    html, body {
      height: 100%;
      font-family: 'Georgia', 'Times New Roman', serif;
      background: var(--bg);
      color: var(--text);
      overflow: hidden;
    }

    #app {
      display: flex;
      height: 100dvh;
      overflow: hidden;
    }

    /* ── LIST PANEL ── */
    #list-panel {
      width: 280px;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      background: var(--sidebar-bg);
      border-right: 1px solid var(--border);
      overflow: hidden;
      transition: transform 0.25s ease;
    }

    .list-header {
      padding: 28px 20px 16px;
      border-bottom: 1px solid var(--border);
      flex-shrink: 0;
    }

    .list-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 14px;
    }

    .list-title {
      font-size: 20px;
      font-weight: bold;
      letter-spacing: 0.04em;
    }

    #btn-new {
      width: 40px; height: 40px;
      border-radius: 50%;
      border: none;
      background: var(--accent);
      color: var(--bg);
      font-size: 26px;
      font-family: inherit;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      -webkit-tap-highlight-color: transparent;
      transition: transform 0.15s;
    }
    #btn-new:hover { transform: scale(1.1); }

    #search {
      width: 100%;
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--bg);
      color: var(--text);
      font-size: 15px;
      font-family: inherit;
      outline: none;
    }
    #search::placeholder { color: var(--text-muted); }

    #note-list {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      -webkit-overflow-scrolling: touch;
    }

    .empty-msg {
      color: var(--text-muted);
      font-size: 14px;
      text-align: center;
      margin-top: 50px;
    }

    .note-item {
      padding: 14px 16px;
      margin-bottom: 8px;
      border-radius: 12px;
      cursor: pointer;
      border-left: 4px solid transparent;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
      transition: background 0.15s;
    }
    .note-item:hover { background: var(--hover); }
    .note-item.active { background: var(--active-bg); }

    .note-item-title {
      font-size: 15px;
      font-weight: bold;
      margin-bottom: 3px;
      color: var(--text);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .note-item-preview {
      font-size: 13px;
      color: var(--text-dim);
      margin-bottom: 4px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .note-item-time {
      font-size: 11px;
      color: var(--text-faint);
    }

    #list-footer {
      padding: 12px 20px;
      border-top: 1px solid var(--border);
      font-size: 12px;
      color: var(--text-faint);
      flex-shrink: 0;
    }

    /* ── EDITOR PANEL ── */
    #editor-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      min-width: 0;
    }

    #empty-state {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: var(--text-faint);
    }
    #empty-state .star { font-size: 48px; margin-bottom: 16px; }
    #empty-state .msg1 { font-size: 18px; margin-bottom: 8px; }
    #empty-state .msg2 { font-size: 14px; }
    #empty-state .highlight { color: var(--accent); }

    #editor-content { display: none; flex: 1; flex-direction: column; overflow: hidden; }
    #editor-content.visible { display: flex; }

    #editor-toolbar {
      padding: 18px 28px 14px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--sidebar-bg);
      flex-shrink: 0;
    }

    #btn-back {
      display: none;
      background: transparent;
      border: none;
      color: var(--accent);
      font-size: 28px;
      cursor: pointer;
      padding: 0 6px 0 0;
      line-height: 1;
      font-family: inherit;
      -webkit-tap-highlight-color: transparent;
      flex-shrink: 0;
    }

    #color-swatches {
      display: flex;
      gap: 8px;
      flex: 1;
      flex-wrap: wrap;
    }

    .swatch {
      width: 22px; height: 22px;
      border-radius: 50%;
      border: 2.5px solid transparent;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      flex-shrink: 0;
      transition: transform 0.15s;
    }
    .swatch:hover { transform: scale(1.2); }
    .swatch.selected { border-color: #fff; }

    #btn-delete {
      background: transparent;
      border: 1px solid #3a3530;
      color: var(--danger);
      padding: 6px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-family: inherit;
      -webkit-tap-highlight-color: transparent;
      white-space: nowrap;
      flex-shrink: 0;
    }
    #btn-delete:hover { background: #2a1a18; }

    #editor-title {
      padding: 24px 36px 10px;
      font-size: 28px;
      font-weight: bold;
      font-family: inherit;
      background: transparent;
      border: none;
      border-bottom: 2px solid var(--accent);
      outline: none;
      color: var(--text);
      margin: 0 36px;
      flex-shrink: 0;
      width: calc(100% - 72px);
    }
    #editor-title::placeholder { color: var(--text-faint); }

    #editor-body {
      flex: 1;
      padding: 24px 36px;
      font-size: 16px;
      line-height: 1.8;
      font-family: inherit;
      background: transparent;
      border: none;
      outline: none;
      color: var(--editor-text);
      resize: none;
      -webkit-overflow-scrolling: touch;
    }
    #editor-body::placeholder { color: var(--text-faint); }

    #editor-footer {
      padding: 10px 36px;
      font-size: 12px;
      color: var(--text-faint);
      border-top: 1px solid var(--border);
      flex-shrink: 0;
    }

    /* ── MOBILE ── */
    @media (max-width: 639px) {
      #list-panel {
        width: 100%;
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        z-index: 1;
        border-right: none;
      }
      #list-panel.hidden {
        transform: translateX(-100%);
        pointer-events: none;
      }
      .list-header { padding-top: env(safe-area-inset-top, 50px); padding-top: max(50px, env(safe-area-inset-top)); }

      #editor-panel {
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        z-index: 2;
        transform: translateX(100%);
        transition: transform 0.25s ease;
        background: var(--bg);
      }
      #editor-panel.visible {
        transform: translateX(0);
      }

      #btn-back { display: block; }
      #editor-toolbar { padding-top: max(50px, env(safe-area-inset-top)); }
      .swatch { width: 26px; height: 26px; }

      #editor-title {
        font-size: 22px;
        padding: 18px 20px 10px;
        margin: 0 20px;
        width: calc(100% - 40px);
      }
      #editor-body { padding: 16px 20px; }
      #editor-footer { padding: 10px 20px max(20px, env(safe-area-inset-bottom)); }
    }

    /* scrollbar */
    #note-list::-webkit-scrollbar { width: 4px; }
    #note-list::-webkit-scrollbar-track { background: transparent; }
    #note-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
    #editor-body::-webkit-scrollbar { width: 4px; }
    #editor-body::-webkit-scrollbar-track { background: transparent; }
    #editor-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
  </style>
</head>
<body>
<div id="app">

  <!-- LIST PANEL -->
  <div id="list-panel">
    <div class="list-header">
      <div class="list-title-row">
        <span class="list-title">✦ Notes</span>
        <button id="btn-new" title="New note">+</button>
      </div>
      <input id="search" type="search" placeholder="Search notes…" autocomplete="off" />
    </div>
    <div id="note-list"></div>
    <div id="list-footer">0 notes</div>
  </div>

  <!-- EDITOR PANEL -->
  <div id="editor-panel">
    <div id="empty-state">
      <div class="star">✦</div>
      <div class="msg1">Select a note to edit</div>
      <div class="msg2">or press <span class="highlight">+</span> to create one</div>
    </div>
    <div id="editor-content">
      <div id="editor-toolbar">
        <button id="btn-back" title="Back">‹</button>
        <div id="color-swatches"></div>
        <button id="btn-delete">Delete</button>
      </div>
      <input id="editor-title" type="text" placeholder="Note title…" autocomplete="off" />
      <textarea id="editor-body" placeholder="Start writing…"></textarea>
      <div id="editor-footer">0 chars · 0 words · just now</div>
    </div>
  </div>

</div>

<script>
  const COLORS = ["#f5c842","#f28b6e","#82c9a0","#7ec8e3","#c4a6f5","#f5a6c4"];

  let notes = [
    { id: 1, title: "Welcome!", body: "This is your new note-taking space. Tap + to create a new note.", color: "#f5c842", created: Date.now() - 86400000 },
    { id: 2, title: "Tips", body: "• Tap any note to edit it\n• Pick a color for each note\n• Tap ‹ to go back to the list\n• Delete notes you don't need", color: "#82c9a0", created: Date.now() - 3600000 },
  ];
  let activeId = null;
  let searchQuery = "";

  // DOM refs
  const listPanel     = document.getElementById("list-panel");
  const editorPanel   = document.getElementById("editor-panel");
  const noteList      = document.getElementById("note-list");
  const listFooter    = document.getElementById("list-footer");
  const searchInput   = document.getElementById("search");
  const emptyState    = document.getElementById("empty-state");
  const editorContent = document.getElementById("editor-content");
  const editorToolbar = document.getElementById("editor-toolbar");
  const colorSwatches = document.getElementById("color-swatches");
  const editorTitle   = document.getElementById("editor-title");
  const editorBody    = document.getElementById("editor-body");
  const editorFooter  = document.getElementById("editor-footer");
  const btnNew        = document.getElementById("btn-new");
  const btnBack       = document.getElementById("btn-back");
  const btnDelete     = document.getElementById("btn-delete");

  function timeAgo(ts) {
    const d = Date.now() - ts;
    if (d < 60000) return "just now";
    if (d < 3600000) return `${Math.floor(d / 60000)}m ago`;
    if (d < 86400000) return `${Math.floor(d / 3600000)}h ago`;
    return `${Math.floor(d / 86400000)}d ago`;
  }

  function isMobile() { return window.innerWidth < 640; }

  function getFiltered() {
    const q = searchQuery.toLowerCase();
    return notes.filter(n =>
      n.title.toLowerCase().includes(q) || n.body.toLowerCase().includes(q)
    );
  }

  function renderList() {
    const filtered = getFiltered();
    noteList.innerHTML = "";

    if (filtered.length === 0) {
      const msg = document.createElement("div");
      msg.className = "empty-msg";
      msg.textContent = searchQuery ? "No results found" : "No notes yet — tap + to begin";
      noteList.appendChild(msg);
    } else {
      filtered.forEach(note => {
        const el = document.createElement("div");
        el.className = "note-item" + (note.id === activeId && !isMobile() ? " active" : "");
        el.style.borderLeftColor = note.color;
        el.dataset.id = note.id;
        el.innerHTML = `
          <div class="note-item-title">${escHtml(note.title) || "Untitled"}</div>
          <div class="note-item-preview">${escHtml(note.body.replace(/\n/g, " ")) || "Empty note"}</div>
          <div class="note-item-time">${timeAgo(note.created)}</div>
        `;
        el.addEventListener("click", () => openNote(note.id));
        noteList.appendChild(el);
      });
    }

    listFooter.textContent = `${notes.length} note${notes.length !== 1 ? "s" : ""}`;
  }

  function renderEditor() {
    const note = notes.find(n => n.id === activeId);
    if (!note) {
      emptyState.style.display = "flex";
      editorContent.classList.remove("visible");
      if (isMobile()) {
        editorPanel.classList.remove("visible");
        listPanel.classList.remove("hidden");
      }
      return;
    }

    emptyState.style.display = "none";
    editorContent.classList.add("visible");

    if (isMobile()) {
      editorPanel.classList.add("visible");
      listPanel.classList.add("hidden");
    }

    // Color swatches
    colorSwatches.innerHTML = "";
    COLORS.forEach(c => {
      const btn = document.createElement("button");
      btn.className = "swatch" + (note.color === c ? " selected" : "");
      btn.style.background = c;
      btn.title = c;
      btn.addEventListener("click", () => {
        updateNote(note.id, "color", c);
      });
      colorSwatches.appendChild(btn);
    });

    editorTitle.value = note.title;
    editorTitle.style.borderBottomColor = note.color;
    editorBody.value = note.body;
    updateFooter(note);
  }

  function updateFooter(note) {
    const chars = note.body.length;
    const words = note.body.split(/\s+/).filter(Boolean).length;
    editorFooter.textContent = `${chars} chars · ${words} words · ${timeAgo(note.created)}`;
  }

  function openNote(id) {
    activeId = id;
    renderList();
    renderEditor();
  }

  function createNote() {
    const note = {
      id: Date.now(),
      title: "",
      body: "",
      color: COLORS[Math.floor(Math.random() * COLORS.length)],
      created: Date.now(),
    };
    notes.unshift(note);
    openNote(note.id);
    setTimeout(() => editorTitle.focus(), 80);
  }

  function updateNote(id, field, value) {
    const note = notes.find(n => n.id === id);
    if (!note) return;
    note[field] = value;
    note.created = Date.now();
    if (field === "color") {
      editorTitle.style.borderBottomColor = value;
      renderList(); // update sidebar color strip
      // re-render swatches
      colorSwatches.querySelectorAll(".swatch").forEach((btn, i) => {
        btn.classList.toggle("selected", COLORS[i] === value);
      });
    } else {
      // debounce list re-render for typing
      clearTimeout(updateNote._timer);
      updateNote._timer = setTimeout(renderList, 300);
      updateFooter(note);
    }
  }

  function deleteNote(id) {
    notes = notes.filter(n => n.id !== id);
    activeId = null;
    renderList();
    renderEditor();
  }

  function escHtml(str) {
    return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
  }

  // Events
  btnNew.addEventListener("click", createNote);
  btnBack.addEventListener("click", () => {
    activeId = null;
    renderList();
    renderEditor();
  });
  btnDelete.addEventListener("click", () => { if (activeId) deleteNote(activeId); });

  searchInput.addEventListener("input", e => {
    searchQuery = e.target.value;
    renderList();
  });

  editorTitle.addEventListener("input", e => {
    if (activeId) updateNote(activeId, "title", e.target.value);
  });
  editorBody.addEventListener("input", e => {
    if (activeId) updateNote(activeId, "body", e.target.value);
  });

  // Resize: re-render layout
  window.addEventListener("resize", () => {
    renderList();
    if (activeId) {
      if (isMobile()) {
        editorPanel.classList.add("visible");
        listPanel.classList.add("hidden");
      } else {
        editorPanel.classList.remove("visible");
        listPanel.classList.remove("hidden");
      }
    }
  });

  // Init
  renderList();
  renderEditor();
</script>
</body>
</html>
